#!/bin/bash

set -x  # debug: print every command

BASE_DIR="$HOME/Screen_Switcher"
APP_DIR="$BASE_DIR/app"
MAIN_URL="https://raw.githubusercontent.com/youraverageazurecosplay-png/Screen_Switcher/main/Screen_Switcher.py"

echo "BASE_DIR = $BASE_DIR"
echo "APP_DIR  = $APP_DIR"
echo "MAIN_URL = $MAIN_URL"

mkdir -p "$APP_DIR"
cd "$APP_DIR" || exit 1

python3 -m venv .venv || exit 1
# shellcheck source=/dev/null
source .venv/bin/activate || exit 1

pip install --upgrade pip || exit 1
pip install pyobjc pynput || exit 1

echo "Now downloading main script..."
curl -v -L "$MAIN_URL" -o Screen_Switcher.py

ls -l
echo "Done."
